name: Deploy to Google Cloud

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v3

    - name: Deploy to Google Cloud
      uses: google-github-actions/deploy-cloud-functions@v0
      with:
        name: ai-itinerary-generator
        runtime: python312
        region: us-central1
        credentials: ${{ secrets.GCP_SA_KEY }}
        env_vars: OPENAI_API_KEY=${{ secrets.OPENAI_API_KEY }}